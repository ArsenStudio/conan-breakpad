cmake_minimum_required( VERSION 2.8.12 )
project( PackageTest )

include( ${CMAKE_BINARY_DIR}/conanbuildinfo.cmake )
conan_basic_setup()

if (APPLE)
  find_library(BREAKPAD NAMES Breakpad)
  if (NOT BREAKPAD)
    message(FATAL_ERROR "Breakpad not found")
  endif()
elseif (MSVC)
  find_package(BREAKPAD)
  if(NOT BREAKPAD_FOUND)
    message(FATAL_ERROR "Breakpad not found")
  endif ()
endif ()

add_executable( example example.cpp )

if (APPLE)
  target_link_libraries( example ${BREAKPAD} )
  file(COPY ${BREAKPAD} DESTINATION Frameworks)
elseif (MSVC)
  include_directories(${BREAKPAD_INCLUDE_DIRS})
  target_link_libraries( example ${BREAKPAD_LIBRARIES} )
endif ()